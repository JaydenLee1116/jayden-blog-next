---
emoji: ğŸŒ±
title: 240102(í™”)
date: '2024-01-02 23:00:00'
author: ì œì´ë“ 
tags: ê¸°ë¡ ì¼ì§€
categories: ì„±ì¥ì¼ì§€
thumbnail: /images/thumbnails/plant.png
---

# ğŸŒ± ì„±ì¥ì¼ì§€ 8.0

ì±… `í–‰ë³µí•œ ì´ê¸°ì£¼ì˜ì(ì›¨ì¸ ë‹¤ì´ì–´)`ì˜ ë‚´ìš©ì— ìê·¹ë°›ì•„ ì‹œì‘í•˜ëŠ” ì†Œë°•í•œ `ì„±ì¥ê¸°ë¡`

- ì‚´ì•„ìˆëŠ” ê½ƒê³¼ ì£½ì€ ê½ƒì€ ì–´ë–»ê²Œ êµ¬ë³„í•˜ëŠ”ê°€?
- ì„±ì¥í•˜ê³  ìˆëŠ” ê²ƒì´ ì‚´ì•„ ìˆëŠ” ê²ƒì´ë‹¤.
- ìƒëª…ì˜ ìœ ì¼í•œ ì¦ê±°ëŠ” ì„±ì¥ì´ë‹¤!

> âš› (8.0)<ì™„ì „ ê°œí¸> ê·¸ ë‚ ì˜ í‚¤ì›Œë“œ ì¤‘ì‹¬ìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•˜ë˜ ë§¤ì¼ ê¾¸ì¤€íˆ ì‘ì„±í•  ìˆ˜ ìˆëŠ” ê³µê°„ì„ ë§Œë“¤ì–´ë³´ì.

## Storybook Addon

ìŠ¤í† ë¦¬ë¶ì€ ë‹¤ì–‘í•œ ì• ë“œì˜¨ì„ ì œê³µí•¨ìœ¼ë¡œì¨ ê°œë°œìê°€ ë”ìš± í¸ë¦¬í•˜ê²Œ ìŠ¤í† ë¦¬ë¶ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.

### ./storybook/main.ts

ì´ íŒŒì¼ì€ ìŠ¤í† ë¦¬ë¶ì˜ ì„¤ì • íŒŒì¼ë¡œ ìŠ¤í† ë¦¬ íŒŒì¼ ê²½ë¡œ, ì• ë“œì˜¨ ë“±ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```ts
import type { StorybookConfig } from '@storybook/react-vite';

const config: StorybookConfig = {
  stories: ['../src/**/*.mdx', '../src/**/*.stories.@(js|jsx|mjs|ts|tsx)'],
  addons: [
    '@storybook/addon-links',
    '@storybook/addon-essentials',
    '@storybook/addon-onboarding',
    '@storybook/addon-interactions',
  ],
  framework: {
    name: '@storybook/react-vite',
    options: {},
  },
  docs: {
    autodocs: 'tag',
  },
};

export default config;
```

### ./storybook/preview.ts

ì´ íŒŒì¼ì€ ìŠ¤í† ë¦¬ë¶ì˜ ë Œë”ë§ ì„¤ì • íŒŒì¼ë¡œ ìŠ¤í† ë¦¬ë¶ì˜ ë Œë”ë§ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

```ts
import type { Preview } from '@storybook/react';

const preview: Preview = {
  parameters: {
    actions: { argTypesRegex: '^on[A-Z].*' },
    controls: {
      matchers: {
        color: /(background|color)$/i,
        date: /Date$/i,
      },
    },
  },
};

export default preview;
```

## React Queryì˜ ë‚™ê´€ì  ì—…ë°ì´íŠ¸

ìœ ì €ì—ê²Œ ë³´ì—¬ì¤„ ë°ì´í„°ë¥¼ ì„œë²„ì—ê²Œ ë°›ì•„ì˜¤ëŠ” ë™ì•ˆ ì·¨í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ í¬ê²Œ 2ê°€ì§€ê°€ ìˆë‹¤.

1. ì„œë²„ì—ê²Œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³  ì‘ë‹µì„ ë°›ì•„ì˜¨ í›„ì— UIë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.(ë¹„ê´€ì  ì—…ë°ì´íŠ¸)

- ì„œë²„ì—ê²Œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ëŠ” ë™ì•ˆ ìœ ì €ëŠ” ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì•¼ í•œë‹¤.
- ê·¸ ì‚¬ì´ì— ë¡œë”© ìŠ¤í”¼ë„ˆ í˜¹ì€ ìŠ¤ì¼ˆë ˆí†¤, ë©”ì‹œì§€ ë“±ì„ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.

2. ì„œë²„ì—ê²Œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê¸° ì „ì— UIë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.(ë‚™ê´€ì  ì—…ë°ì´íŠ¸)

- ì„œë²„ì—ê²Œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ëŠ” ë™ì•ˆ ìœ ì €ëŠ” ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê¸° ì „ì—ë„ UIë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.
- í´ë¼ì´ì–¸íŠ¸ ë‹¨ì—ì„œ ë³´ì—¬ì¤˜ì•¼í•  ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ì—…ë°ì´íŠ¸í•˜ê³  ì„œë²„ì—ê²Œ ë°ì´í„°ë¥¼ ìš”ì²­í•œë‹¤.
- ëŒ€í‘œì ìœ¼ë¡œ ì–´ë–¤ ê¸€ì˜ ì¢‹ì•„ìš” ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ, ì¢‹ì•„ìš” ë²„íŠ¼ì˜ ìƒ‰ìƒì„ ë¯¸ë¦¬ ë³€ê²½í•˜ê³  ì„œë²„ì—ê²Œ ì¢‹ì•„ìš” ìš”ì²­ì„ ë³´ë‚´ëŠ” ì˜ˆì‹œê°€ ìˆë‹¤.

React QueryëŠ” ì–´ë–¤ ë°ì´í„°ë¥¼ ì„œë²„ì— ë°˜ì˜í•˜ê¸° ì „ì— UIë¥¼ ë‚™ê´€ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ì•„ë˜ëŠ” ê·¸ ì˜ˆì‹œ ì½”ë“œì´ë‹¤.

```ts
const queryClient = useQueryClient();

const { mutate } = useMutation({
  mutationFn: updateTodo,
  // mutate í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰ëœë‹¤.
  onMutate: async newTodo => {
    // ì§„í–‰ ì¤‘ì¸ ì¿¼ë¦¬ë¥¼ ì·¨ì†Œí•œë‹¤.
    // (ê·¸ë˜ì„œ ë‚™ê´€ì  ì—…ë°ì´íŠ¸ë¥¼ ë®ì–´ì“°ì§€ ì•Šë„ë¡ í•œë‹¤.)
    await queryClient.cancelQueries({ queryKey: ['todos'] });

    // ì´ì „ê°’ì„ ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ ì €ì¥í•œë‹¤.
    const previousTodos = queryClient.getQueryData(['todos']);

    // ìƒˆë¡œìš´ ê°’ì„ ë‚™ê´€ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•œë‹¤.
    queryClient.setQueryData(['todos'], old => [...old, newTodo]);

    // ìŠ¤ëƒ…ìƒ·ëœ ê°’ì„ í¬í•¨í•˜ëŠ” ì»¨í…ìŠ¤íŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
    return { previousTodos };
  },
  // ë§Œì•½ mutationì´ ì‹¤íŒ¨í•˜ë©´,
  // onMutateì—ì„œ ë°˜í™˜ëœ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡¤ë°±í•œë‹¤.
  onError: (err, newTodo, context) => {
    queryClient.setQueryData(['todos'], context.previousTodos);
    // ì—ëŸ¬ toastë¥¼ ë„ìš°ëŠ” ë“±ì˜ ì‘ì—…ì„ í•  ìˆ˜ ìˆë‹¤.
  },
  // ì—ëŸ¬ë‚˜ ì„±ê³µ í›„ì—ëŠ” í•­ìƒ ì¿¼ë¦¬ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¨ë‹¤.
  onSettled: () => {
    queryClient.invalidateQueries({ queryKey: ['todos'] });
  },
});
```

# ğŸ“ íšŒê³ 

í... íšŒì‚¬ì—ì„œ ì ìš©í•œ ê²ƒë“¤ì„ ë¹ ë¥´ê²Œ í‚¤ì›Œë“œ ìœ„ì£¼ë¡œ ê°€ì ¸ì™€ì„œ ì •ë¦¬í•˜ëŠ”ë° ì´ê²ƒë„ ì‰½ì§€ ì•Šë„¤... ì ì  ì´ íŒ¨í„´ë„ ìµìˆ™í•´ì§€ê² ì§€!!!

## ì°¸ê³ 

- [Storybook Addons](https://storybook.js.org/addons/)
- [React Query - Optimistic Updates](https://tanstack.com/query/v5/docs/react/guides/optimistic-updates)
